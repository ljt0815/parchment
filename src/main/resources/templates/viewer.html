<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/default_layout}"
      layout:fragment="Content">
<head>
    <style>
        html, body {
            width: 100%;
            height: 100%;
        }
        #page {
            height: 100%;
        }
        .navbar {
            display: none;
        }
        #page1 {

        }
        #page2 {

        }
        @media (max-width: 1200px) {
            #page2 {
                display: none;
            }
        }
    </style>
    <title>parchment</title>
    <script>
        let toggle = false;
        function getPagePath(flag) {
            let data = {
                flag,
                uuid : $("#uuid").val()
            }
            $.ajax({
                url: "/book/getPagePath",
                data: JSON.stringify(data),
                async: true,
                contentType: "application/json; charset=utf-8",
                method: "POST",
                dataType: "json"
            }).done(function(resp){
                console.log(resp)
                $("#page1").attr("src", resp.data.page1Path);
                $("#page2").attr("src", resp.data.page2Path);
            }).fail(function(xhr, status, errorThrown){
                console.log(errorThrown + status);
            });
        }
        $(function() {
            getPagePath("");
            let nav = $("nav");
            nav.addClass("fixed-top");
            $("body").click(function(e) {
                if ($(e.target).parents(".container").length >= 1) {
                    console.log("asdf"); // 컨테이너 내부 클릭했을때
                } else if (toggle == false) {
                    // 그 외는 네베게이션바 토글
                    nav.removeClass("animate__fadeOutUp");
                    nav.addClass("animate__animated animate__fadeInDown");
                    nav.css("display","block");
                    nav.on("animationend", function() {
                        nav.removeClass("animate__animated animate__fadeInDown");
                        nav.css("display","flex");
                    });
                    toggle = true;
                } else {
                    nav.removeClass("animate__fadeInDown");
                    nav.addClass("animate__animated animate__fadeOutUp");
                    nav.on("animationend", function() {
                        nav.removeClass("animate__animated animate__fadeOutUp");
                        nav.css("display","none");
                    });
                    toggle = false;
                }
            });
            $("#btn_next").click(getPagePath("next"));
        });
    </script>
</head>
<body>
    <div class="d-flex container justify-content-center" id="page">
        <div class="align-self-center">
            <div class="row">
                <input type="hidden" id="uuid" th:value="${uuid}">
                <div class="col-xxl-6 mr-5">
                    <img id="page1">
                </div>
                <div class="col-xxl-6">
                    <img id="page2">
                </div>
            </div>
            <button class="btn btn-dark">이전</button>
            <button class="btn btn-dark" style="float:right" id="btn_next">다음</button>
        </div>
    </div>
</body>
</html>